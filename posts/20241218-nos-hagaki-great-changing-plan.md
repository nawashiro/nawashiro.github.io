---
title: "NosHagaki大改造計画"
date: "2024-12-18"
---

nos-hagaki を大改造しようというのだ。具体的には二つのプランがある。

ひとつは、まともに動くようにしようという話。現状、公式の Redis がなんかいつの間にか吹っ飛んでることが多いので Redis への依存を無くす。話は単純で、多少作法は変わるが、今まで Redis にやらせていたことを Postgresql にやらせるのだ。

もうひとつは、マッチング機能を作ること。マッチングへのオプトインを記録し、文通相手をランダムに選べるようにする。メッセージボトルというわけだ。

素朴に実現すると、オプトイン情報をリレーに送信・のちに取得してランダムに選ぶわけだ。まあ、まずはテキトーでいいだろう。他の人の投稿に流されて見えなくなる可能性はあるから、再送機能はあってもいいかもしれない。

## Ko-fi API

そうだそうだ。Ko-fi を始めたのだから、私を支援すると何かもらえるプランがあっても良いかもしれない。Ko-fi は API を公開していた。まだ何も考えていないけど、何かしたい。何かできないか。お金が欲しい。お金がない。どうにかならないか。どうにもならない。

いったん既存のシステムを見てみる。独自な実装は予約投稿システム程度だ。決まった時間ののちに投稿する素朴なものだ。もし自由に時間を指定できるようにしたら、便利かもしれないけど面白くない。

他の人はどうしていたか。misskey.io は支援するとバッジがついたり保存容量が増えたりする。Mixi は広告の非表示をはじめとした便利機能が色々ある。こまごまとした便利機能。これがわが nos-hagaki に足りないものではないか。

思えば、ミュートを反映させたりなどこまごまとした機能を実装せずにいた。面倒くさかったのだ。これはよくないことかもしれない。こまごまとした機能を充実させて、支援プランで出す。これでどうか。

なんにせよ、すべては基礎を固めてからだ。課金要素についてはやるかどうかもわからない。

## 関連項目

- [ハッカソンでバーチャルな文通ができるNostrクライアント「NosHagaki」を作ってみた](240311-nos-hagaki-making.md)