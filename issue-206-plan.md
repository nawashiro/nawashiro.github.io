# Issue 206 設計・実装計画: CSSを書きたくない（デザインシステム導入）

## 事象 / 目的

- 現行の CSS が複雑で、人間向けではないと感じる。
- Tailwind などのデザインシステムを導入して、スタイル設計を単純化したい。
- 参考記事（UI/デザインシステムの考え方）に近い体験へ寄せたい。

## 第三者視点での事実整理

- 現行は `styles/global.css` と CSS Modules が中心で、Tailwind 等のユーティリティ設計は導入されていない。
- Next.js 15 系で運用中のため、PostCSS/Tailwind の導入は一般的な手順で可能。
- 記事本文の Markdown レンダリングが中心で、全体の可読性と安心感が体験の核。
- 既存の色・余白・タイポグラフィが多数の箇所に分散している可能性が高い。

## 専門家視点での問題点・懸念（忌憚なく）

- **移行コスト**: 既存 CSS とユーティリティが混在すると、むしろ複雑化しやすい。
- **デザインの一貫性**: ルールが未定義だと、Tailwind 導入後も「場当たりの class 追加」が起きる。
- **可読性の低下**: Utility 乱用で JSX がノイズ化し、読みづらくなる恐れ。
- **段階移行の落とし穴**: Markdown 本文（typography）だけ旧スタイルのまま残ると、全体の印象が分断される。
- **運用負荷**: デザイントークン（色/余白/影）が未整理だと、結局 CSS を書き続けることになる。

## Readable Code / Zen の確認

- **1つの真実**: デザイントークンは `tailwind.config.js` に集約し、CSS の手書きは最小限にする。
- **シンプルな分割**: レイアウト・コンポーネント・本文（typography）を段階的に移行。
- **静かな明快さ**: 使う色/余白/影/角丸は数を絞り、説明可能なルールにする。
- **最小の変更**: まずはホーム/記事ページの骨格だけを Tailwind 化し、体験を壊さない。

## 実装計画（分割・段階移行）

1. **設計の土台づくり**
   - Tailwind + PostCSS を導入し、`tailwind.config.js` にデザイントークンを定義。
   - DaisyUI などを使う場合はテーマを1つに固定し、カラーパレットと半径/影のルールを明示。
2. **グローバル基盤の切り替え**
   - `styles/global.css` の役割を整理し、Tailwind の `@layer base` に移行できる部分を移す。
   - 旧スタイルは削除ではなく「減らす」方向で段階的に縮小。
3. **レイアウトの移行**
   - `components/layout.jsx` など主要レイアウトを Tailwind へ置換。
   - 余白・幅・行間の規則を統一して、読書体験を優先。
4. **主要コンポーネントの移行**
   - `WebMention` / `network_graph` など頻出 UI を順に置換。
   - DaisyUI を使う場合は `card`, `badge`, `menu` などの利用を統一。
5. **Markdown 本文の整合性**
   - `@tailwindcss/typography` などを検討し、本文のタイポと余白を一本化。
6. **全体の整理と縮減**
   - 旧 CSS の未使用ルールを削除し、Tailwind で一本化。

## TDD 前提の進め方（失敗→成功の流れ）

1. **テストを先に書く（失敗を作る）**
   - Playwright でトップページと記事ページを開き、主要要素の class や可視状態を検証する。
   - 例: レイアウトの幅が一定、本文領域の余白が存在、ナビゲーションが表示される等。
2. **失敗確認**
   - Tailwind 未導入の状態で、テストが失敗することを確認。
3. **最小実装**
   - Tailwind を導入し、レイアウト周りの class を最小限追加。
4. **成功確認**
   - テスト再実行で通過することを確認。
5. **リファクタ**
   - 乱雑な class の整理、デザイントークンの共通化、不要 CSS の削減。
6. **追加テスト**
   - DaisyUI を使う場合は、テーマが正しく適用されることの表示テストを追加。

## テスト観点（最低限）

- トップページ: 主要セクションが表示され、余白・幅が規定通りか。
- 記事ページ: Markdown が読みやすい行間/サイズで表示されるか。
- ナビゲーション: メニュー/リンクが視認でき、クリックで遷移できるか。

## 影響範囲

- `package.json`: Tailwind/DaisyUI 依存追加。
- `postcss.config.js`, `tailwind.config.js`: 新規追加。
- `styles/global.css`: 役割整理、ベーススタイルの統合。
- `components/*`, `pages/*`: レイアウトと主要 UI の置換。

## 判断（第三者視点）

- Tailwind 導入は「CSSを書きたくない」要望に適合するが、
  **設計ルールを先に決めないと逆に複雑化する**。
- 段階移行で体験を守りつつ、最終的に CSS の手書きを削減するのが合理的。
- デザインシステムは「道具」なので、体験の核（読みやすさ・安心感）を優先する。
